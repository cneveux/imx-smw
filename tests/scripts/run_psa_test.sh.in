#! /bin/bash

set -u

res=0
error=0
cfg_path="@CMAKE_INSTALL_PREFIX@/@SMW_TESTS_TARGET_CONFIG_DIR@"

if [ $# -lt 1 ]
then
  echo "This script needs 1 argument:"
  echo " - SMW configuration file name. Must be located in: ${cfg_path} directory"
  exit 1
fi

#
# Set the SMW configuration file and run the test
#
export SMW_CONFIG_FILE="${cfg_path}/$1"

@PROJECT_NAME@
res=$?
if [ $res -ne 0 ]
then
  echo "$2 test failed (${res})"
  error=1
fi

exit ${error}
